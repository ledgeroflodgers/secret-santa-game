<div class="mobile-gift-display">
  <!-- Loading state with spinner and skeleton UI -->
  <div *ngIf="loading" class="loading-container" 
       role="status" 
       aria-live="polite" 
       [attr.aria-label]="getLoadingStateDescription()"
       [attr.aria-describedby]="'loading-message'"
       tabindex="0">
    <div class="loading-content">
      <div class="loading-spinner" aria-hidden="true">
        <div class="spinner-ring"></div>
      </div>
      <div class="loading-message" id="loading-message">Loading gifts...</div>
      <div class="loading-subtitle" *ngIf="isRetrying">
        Reconnecting... (Attempt {{ retryCount }}/{{ MAX_RETRY_ATTEMPTS }})
      </div>
    </div>
    
    <!-- Skeleton UI for better perceived performance -->
    <div class="skeleton-grid" aria-hidden="true" *ngIf="gifts.length === 0">
      <div class="skeleton-item" *ngFor="let item of [1,2,3,4,5,6]"></div>
    </div>
  </div>

  <!-- Error state with enhanced accessibility -->
  <div *ngIf="error && !loading" class="error-container" 
       role="alert" 
       aria-live="assertive"
       [attr.aria-label]="getErrorStateDescription()"
       [attr.aria-describedby]="'error-message'"
       tabindex="0">
    <div class="error-content">
      <div class="error-icon" aria-hidden="true">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
      </div>
      <div class="error-message" id="error-message">{{ error }}</div>
      <div class="network-status" *ngIf="!isDeviceOnline()">
        <span class="status-indicator offline" aria-hidden="true"></span>
        Network Status: {{ getNetworkStatusDescription() }}
      </div>
      <div class="error-actions">
        <button *ngIf="canRetry()" 
                class="retry-button" 
                (click)="retryLoading()"
                [attr.aria-label]="'Retry loading gifts'"
                type="button">
          <span class="button-icon" aria-hidden="true">â†»</span>
          Retry Now
        </button>
        <div *ngIf="!canRetry() && !isDeviceOnline()" class="offline-message">
          Waiting for internet connection...
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state with enhanced UI -->
  <div *ngIf="!loading && !error && gifts.length === 0" class="empty-container"
       role="status"
       aria-live="polite"
       [attr.aria-label]="getEmptyStateDescription()"
       [attr.aria-describedby]="'empty-message'"
       tabindex="0">
    <div class="empty-content">
      <div class="empty-icon" aria-hidden="true">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="3" y="8" width="18" height="4" rx="1"></rect>
          <path d="m12 8-2-4h4l-2 4"></path>
          <path d="m8 12-2 4h12l-2-4"></path>
        </svg>
      </div>
      <div class="empty-message" id="empty-message">Waiting for gifts to be added...</div>
      <div class="empty-subtitle">
        The game administrator will add gifts shortly
      </div>
      <div class="connection-status" *ngIf="isDeviceOnline()">
        <span class="status-indicator online" aria-hidden="true"></span>
        Connected - Updates will appear automatically
      </div>
    </div>
  </div>

  <!-- Gift grid -->
  <div *ngIf="!loading && !error && gifts.length > 0" 
       class="gift-grid"
       [style.grid-template-columns]="getGridTemplateColumns()"
       [style.grid-template-rows]="getGridTemplateRows()"
       role="list"
       [attr.aria-label]="'Gift display showing ' + gifts.length + ' gifts'">
    <div *ngFor="let gift of gifts; trackBy: trackByGiftId" 
         class="gift-item"
         [class]="'gift-item ' + getGiftStatusClass(gift)"
         [style.font-size]="getResponsiveFontSize()"
         [style.background-color]="getGiftBackgroundColor(gift)"
         [style.color]="getGiftTextColor(gift)"
         [attr.aria-label]="'Gift: ' + gift.name + ', ' + getGiftStatusDescription(gift)"
         role="listitem">
      {{ gift.name }}
    </div>
  </div>
</div>
